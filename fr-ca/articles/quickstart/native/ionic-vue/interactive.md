---
title: Ajouter la connexion à votre application Ionic Vue avec l’application Capacitor
description: Ce guide montre comment intégrer Auth0 avec une application Ionic (Vue) et Capacitor en utilisant la trousse SDK Vue Auth0.
interactive:  true
files:
 - files/main
 - files/LoginButton
 - files/LogoutButton
 - files/App
 - files/UserProfile
github:
  path: vue
locale: fr-CA
---

# Ajouter la connexion à votre application Ionic Vue avec l’application Capacitor


<p>Auth0 vous permet d’ajouter rapidement l’authentification et de pouvoir accéder aux informations relatives au profil utilisateur dans votre application. Ce guide montre comment intégrer Auth0 avec une application Ionic (Vue) et Capacitor en utilisant la trousse <a href="https://github.com/auth0/auth0-vue" target="_blank" rel="noreferrer noopener">SDK Vue Auth0</a>.</p><p></p>

## Démarrage


<p>Ce guide de démarrage rapide suppose que vous avez déjà une application <a href="https://ionicframework.com/" target="_blank" rel="noreferrer noopener">Ionic</a> en cours d’exécution avec <a href="https://capacitorjs.com/" target="_blank" rel="noreferrer noopener">Capacitor</a>. Si ce n’est pas le cas, consultez <a href="https://capacitorjs.com/docs/getting-started/with-ionic" target="_blank" rel="noreferrer noopener">Utiliser Capacitor avec Ionic Framework</a> pour commencer avec une application simple ou clonez nos <a href="https://github.com/auth0-samples/auth0-ionic-samples" target="_blank" rel="noreferrer noopener">our sample apps (exemples d’applications)</a>.</p><p>Vous devez également être familiarisé avec <a href="https://capacitorjs.com/docs/basics/workflow" target="_blank" rel="noreferrer noopener">Capacitor development workflow (le flux de production de développement Capacitor)</a>.</p>

## Configuration d’Auth0


<p>Pour utiliser les services Auth0, vous devez avoir une application installée dans Auth0 Dashboard. L’application Auth0 est l’endroit où vous allez configurer le fonctionnement de l’authentification pour votre projet.</p><p><div class="alert-container" severity="default"><p>Tout au long de cet article, <code>YOUR_PACKAGE_ID</code> est l’identificateur du package de votre application. Il peut être trouvé et configuré dans le champ <code>appId</code> de votre fichier <code>capacitor.config.ts</code>. Voir <a href="https://capacitorjs.com/docs/config#schema" target="_blank" rel="noreferrer noopener">Schéma de configuration de Capacitor</a> pour plus d’informations.</p></div></p><h3>Configurer une application</h3><p>Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet avec lequel vous souhaitez effectuer l’intégration. Dans Auth0, il est attribué à chaque application un identifiant client unique alphanumérique que votre code d’application utilisera pour appeler les API Auth0 via la trousse SDK.</p><p>Tous les paramètres que vous configurez à l’aide de ce guide rapide seront automatiquement mis à jour pour votre application dans le <a href="https://manage.auth0.com/#/" target="_blank" rel="noreferrer noopener">Dashboard</a>, qui est l’endroit où vous pourrez gérer vos applications à l’avenir.</p><p>Si vous préférez explorer une configuration complète, consultez plutôt un exemple d’application.</p><h3>Configurer les URL de rappel</h3><p>Une URL de rappel est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas redirigés vers votre application après s’être connectés.</p><p><div class="alert-container" severity="default"><p>Si vous suivez notre projet à titre d’exemple, définissez ceci sur <code>YOUR_PACKAGE_ID://{yourDomain}/capacitor/YOUR_PACKAGE_ID/callback</code></p></div></p><h3>Configuration des URL de déconnexion</h3><p>Une URL de déconnexion est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront un message d’erreur.</p><p><div class="alert-container" severity="default"><p>Si vous suivez notre projet à titre d’exemple, définissez ceci sur <code>YOUR_PACKAGE_ID://{yourDomain}/capacitor/YOUR_PACKAGE_ID/callback</code>.</p></div></p><h3>Configurer les origines autorisées</h3><p>Pour pouvoir faire des requêtes à partir de votre application d’origine vers Auth0, définissez les <b>origines autorisées</b> dans vos <a href="https://manage.auth0.com/#/applications/%7ByourClientId%7D/settings" target="_blank" rel="noreferrer noopener">Application Settings (Paramètres d’application)</a>.</p><p><div class="alert-container" severity="default"><p>Si vous suivez notre projet à titre d’exemple, définissez ceci sur <code>capacitor://localhost, http://localhost</code> pour iOS et Android respectivement.</p></div></p><p>Enfin, assurez-vous que le <b>type d’application</b> pour votre application est défini sur <b>Native</b> dans les <a href="https://manage.auth0.com/#/applications/%7ByourClientId%7D/settings" target="_blank" rel="noreferrer noopener">Application Settings (Paramètres d’application)</a>.</p>

## Installer la trousse SDK Vue Auth0


<p>Exécutez la commande suivante dans le répertoire de votre projet pour installer la trousse SDK Vue Auth0 :</p><p><code>npm install @auth0/auth0-vue</code></p><p>La trousse SDK expose plusieurs types qui vous aident à intégrer Auth0 avec votre application Vue, y compris un module et un service d’authentification.</p><h3>Installer les plugiciels Capacitor</h3><p>Ce guide rapide et cet exemple utilisent certains des plugiciels officiels Capacitor. Installez-les dans votre application à l’aide de la commande suivante :</p><p>npm install @capacitor/browser @capacitor/app</p><ul><li><p><a href="https://capacitorjs.com/docs/apis/browser" target="_blank" rel="noreferrer noopener"><code>@capacitor/browser</code></a> : vous permet d’interagir avec le navigateur de système de l’appareil et est utilisé pour ouvrir l’URL vers le point de terminaison d’autorisation de Auth0</p></li><li><p><a href="https://capacitorjs.com/docs/apis/app" target="_blank" rel="noreferrer noopener"><code>@capacitor/app</code></a> : vous permet de souscrire à des événements d’application de haut niveau, utiles pour la gestion des Callbacks depuis Auth0</p></li></ul><p><div class="alert-container" severity="default"><p>Le plugiciel de navigateur de Capacitor sur iOS utilise <a href="https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller" target="_blank" rel="noreferrer noopener"><code>SFSafariViewController</code></a>, qui sur iOS 11+ ne partage pas les témoins avec Safari sur l’appareil. Cela signifie que <a href="https://auth0.com/docs/sso" target="_blank" >SSO</a> ne fonctionnera pas sur ces appareils. Si vous avez besoin de SSO, veuillez utiliser un plugiciel compatible qui utilise <a href="https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession" target="_blank" rel="noreferrer noopener">ASWebAuthenticationSession</a>.</p></div></p>

## Configurer le plugiciel CreateAuht0 {{{ data-action="code" data-code="main.ts" }}}


<p>La trousse SDK exporte <code>createAuth0</code>, un composable qui contient tous les services nécessaires au fonctionnement du SDK. Ce composable doit être enregistré avec votre application et être configuré avec votre domaine Auth0 et votre ID client.</p><p>Le composable <code>createAuth0</code> prend la configuration suivante :</p><ul><li><p><code>domain</code> : La valeur <code>domain </code>présente dans les <b>Settings (Paramètres)</b> de l’application que vous avez créée dans le Auth0 Dashboard, ou votre domaine personnalisé si vous utilisez la <a href="http://localhost:3000/docs/custom-domains" target="_self" >fonctionnalité de domaines personnalisés</a> d’Auth0.</p></li><li><p><code>clientId</code> : La valeur de l’identificateur client présente dans les <b>Settings (Paramètres)</b> de l’application que vous avez créée dans l’Auth0 Dashboard.</p></li><li><p><code>useRefreshTokens</code> : Pour utiliser auth0-vue avec Ionic sur Android et iOS, il est nécessaire d’activer les jetons d’actualisation.</p></li><li><p><code>useRefreshTokensFallback</code> : Pour utiliser auth0-vue avec Ionic sur Android et iOS, il est nécessaire de désactiver le iframe de substitution.</p></li><li><p><code>authorizationParams.redirect_uri</code> : URL pour rediriger vos utilisateurs après qu’ils se sont authentifiés avec Auth0.</p></li></ul><p><div class="alert-container" severity="warning"><p>Pour conserver l’authentification après la fermeture et la réouverture de l’application, vous pouvez définir <code>cacheLocation</code> sur <code>localstorage</code> lors de la configuration de la trousse SDK, mais soyez conscient des <a href="https://auth0.com/docs/libraries/auth0-single-page-app-sdk#change-storage-options" target="_blank" >risques liés au stockage de jetons dans localstorage</a>. De plus, localstorage devrait être traité comme <b>transitoire</b> dans l’application Capacitor car les données pourraient être récupérées de façon inattendue dans certaines circonstances. Veuillez lire les <a href="https://capacitorjs.com/docs/guides/storage#why-cant-i-just-use-localstorage-or-indexeddb" target="_blank" rel="noreferrer noopener">directives sur le stockage dans la documentation Capacitor</a>.</p><p>En outre, la trousse SDK a la capacité <a href="https://github.com/auth0/auth0-spa-js/blob/master/EXAMPLES.md#creating-a-custom-cache" target="_blank" rel="noreferrer noopener">d’utiliser une implémentation de cache personnalisée</a> pour stocker des jetons, si vous avez une exigence d’utiliser un mécanisme de stockage plus sûr et persistant.</p><p><b>Notez</b> que nous recommandons <b>de ne pas</b> utiliser le <a href="https://capacitorjs.com/docs/apis/storage" target="_blank" rel="noreferrer noopener">plugiciel Capacitor pour stocker</a> les jetons, car cela est soutenu par <a href="https://developer.apple.com/documentation/foundation/userdefaults" target="_blank" rel="noreferrer noopener">UserDefaults</a> et <a href="https://developer.android.com/reference/android/content/SharedPreferences" target="_blank" rel="noreferrer noopener">SharedPreferences</a> sur iOS et Android respectivement. Les données stockées à l’aide de ces API ne sont pas chiffrées, non sécurisées et peuvent également être synchronisées dans le nuage.</p></div></p><p><div class="checkpoint">Démarrage rapide Ionic - Étape 4 - Point de contrôle <div class="checkpoint-default"><p>Maintenant que vous avez configuré votre application avec la trousse SDK Vue Auth0, exécutez votre application pour vérifier que la trousse SDK est initialisée sans erreur et que votre application s’exécute comme auparavant.</p></div>

  <div class="checkpoint-success"></div>

  <div class="checkpoint-failure"><p>Nous vous prions de nous excuser pour tout inconvénient causé. Voici quelques éléments à vérifier :</p><ul><li><p>assurez-vous que la bonne application est sélectionnée</p></li><li><p>avez-vous procédé à un enregistrement après avoir saisi vos URL?</p></li><li><p>assurez-vous que le domaine et l’identifiant client ont été importés correctement</p></li></ul><p>Vous rencontrez toujours des problèmes? Consultez notre <a href="https://auth0.com/docs" target="_blank" >documentation</a> ou la <a href="https://community.auth0.com/" target="_blank" rel="noreferrer noopener">page de notre communauté</a> pour obtenir de l’aide.</p></div>

  </div></p>

## Ajouter une fonctionnalité de connexion à votre application {{{ data-action="code" data-code="LoginButton.vue" }}}


<p>Dans une application Capacitor, le <a href="https://capacitorjs.com/docs/apis/browser" target="_blank" rel="noreferrer noopener">plugicielCapacitor’s Browser</a> effectue une redirection vers la <a href="https://auth0.com/universal-login" target="_blank" >Universal Login Page (page de connexion universelle)</a> Auth0. Définissez le paramètre <code>openUrl</code> sur la fonction <code>loginWithRedirect</code> pour utiliser <code>Browser.open</code> afin que l’URL soit ouverte à l’aide du composant de navigateur système de l’appareil (<a href="https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller" target="_blank" rel="noreferrer noopener">SFSafariViewController</a> sur iOS et <a href="https://developer.chrome.com/docs/android/custom-tabs" target="_blank" rel="noreferrer noopener">Chrome Custom Tabs [Onglets personnalisés Chrome]</a> sur Android).</p><p><div class="alert-container" severity="default"><p>Par défaut, la méthode <code>loginWithRedirect</code> de la trousse SDK utilise <code>window.location.href</code> pour accéder à la page de connexion dans l’application de navigateur par défaut sur l’appareil de l’utilisateur plutôt que dans le composant de navigateur système approprié pour la plateforme. L’utilisateur quitterait votre application pour s’authentifier et pourrait rendre l’expérience utilisateur frustrante.</p></div></p><p><div class="checkpoint">Ionic – Étape 5 – Point de contrôle <div class="checkpoint-default"><p>La fonction <code>loginWithRedirect</code> indique à la trousse SDK d’initier le flux de connexion, en utilisant la fonction <code>Browser.open</code> pour ouvrir l’URL de connexion avec le composant navigateur du système de la plateforme en définissant le paramètre <code>openUrl</code>. Cela permet à votre utilisateur de se connecter à votre application. Les utilisateurs sont redirigés vers la page de connexion à Auth0 et ne reçoivent aucune erreur.</p></div>

  <div class="checkpoint-success"></div>

  <div class="checkpoint-failure"><p>Nous vous prions de nous excuser pour tout inconvénient causé. Voici quelques éléments à vérifier :</p><ul><li><p>assurez-vous qu’il n’y a pas d’erreurs dans la fenêtre de la console du navigateur au point de connexion</p></li><li><p>assurez-vous que le domaine et l’identifiant client sont corrects selon votre application Auth0 dans le tableau de bord</p></li><li><p>si vous êtes redirigé vers Auth0 et recevez une page d’erreur, vérifiez la section des « détails techniques » en bas de la page pour connaître la raison de l’échec</p></li></ul><p></p></div>

  </div></p>

## Gérer le rappel de connexion {{{ data-action="code" data-code="App.vue" }}}


<p>Une fois que les utilisateurs sont connectés avec la page de connexion universelle, ils sont redirigés vers votre application au moyen d’une URL avec un schéma d’URL personnalisé. L’événement <code>appUrlOpen</code> doit être traité au sein de votre application. Vous pouvez appeler la méthode <code>handleRedirectCallback</code> à partir de la trousse SDK Auth0 pour initialiser l’état d’authentification.</p><p>Vous pouvez utiliser cette méthode uniquement sur une redirection depuis Auth0. Vérifiez que les paramètres <code>code</code> et <code>state</code> sont présents dans l’URL.</p><p>La méthode <code>Browser.close()</code> devrait fermer le navigateur lorsque cet événement est déclenché.</p><p><div class="alert-container" severity="default"><p>Cet article suppose que vous utiliserez des schémas d’URL personnalisés pour gérer le callback dans votre application. Pour ce faire, enregistrez votre <code>YOUR_PACKAGE_ID</code> comme schéma d’URL pour la plateforme de votre choix. Pour en savoir plus, lisez <a href="https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app" target="_blank" rel="noreferrer noopener">Définition d’un schéma d’URL personnalisé</a> pour iOS ou <a href="https://developer.android.com/training/app-links/deep-linking" target="_blank" rel="noreferrer noopener">Création de liens profonds vers le contenu des applications </a> pour Android.</p></div></p><p><div class="checkpoint">Ionic - Étape 6 - Point de contrôle <div class="checkpoint-default"><p>Ajoutez <code>appUrlOpen</code> au composant <code>App</code> de votre application et connectez-vous. La fenêtre du navigateur devrait se fermer une fois que l’utilisateur s’authentifie et se connecte à votre application.</p></div>

  <div class="checkpoint-success"></div>

  <div class="checkpoint-failure"><p>Nous vous prions de nous excuser pour tout inconvénient causé. Voici quelques éléments à vérifier :</p><ul><li><p>vérifiez que le schéma d’URL personnalisé est enregistré pour la plateforme choisie. Sur iOS, <a href="https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app" target="_blank" rel="noreferrer noopener">définissez un schéma d’URL personnalisé</a> ou ajoutez un <a href="https://developer.android.com/training/app-links/deep-linking" target="_blank" rel="noreferrer noopener">filtre d’intention avec votre schéma personnalisé</a> sur Android</p></li><li><p>si l’événement se déclenche mais que vous recevez une erreur, consultez les <a href="https://manage.auth0.com/#/logs" target="_blank" rel="noreferrer noopener">journaux de votre Auth0 ​Dashboard</a> pour connaître la cause de l’erreur</p></li></ul><p></p></div>

  </div></p>

## Ajouter une fonctionnalité de déconnexion à votre application {{{ data-action="code" data-code="LogoutButton.vue" }}}


<p>Maintenant que les utilisateurs peuvent se connecter, vous devez configurer <a href="https://auth0.com/docs/logout/guides/logout-auth0" target="_blank" >une façon de se déconnecter</a>. Les utilisateurs doivent être redirigés vers le point de terminaison de déconnexion Auth0 dans le navigateur pour effacer leur session de navigation. Encore une fois, le plugiciel du navigateur de Capacitor doit effectuer cette redirection afin que l’utilisateur ne quitte pas votre application et ne vive pas une expérience frustrante.</p><p>Pour y parvenir avec Ionic et Capacitor en conjonction avec le SDK Auth0 :</p><ul><li><p>Créez l’URL de votre application vers laquelle Auth0 doit rediriger après la déconnexion. Il s’agit d’une URL qui utilise votre schéma personnalisé enregistré et le domaine Auth0. Ajoutez-la à votre configuration <b>URL de déconnexions autorisées</b> dans Auth0 Dashboard</p></li><li><p>Déconnectez-vous de la trousse SDK en appelant <code>logout</code> et transmettez votre URL de redirection comme paramètre <code>logoutParams.returnTo</code>.</p></li><li><p>Définissez le paramètre <code>openUrl</code> sur un callback qui utilise le plugiciel de navigateur Capacitor pour ouvrir l’URL à l’aide de <code>Browser.open</code>.</p></li></ul><p><div class="alert-container" severity="default"><p>De la même manière que pour l’étape de connexion, si vous ne définissez pas <code>openUrl</code> lors de l’appel de <code>logout</code>, la trousse SDK redirige l’utilisateur vers l’URL de déconnexion à l’aide de l’application de navigateur par défaut sur l’appareil, ce qui offre une expérience utilisateur sous-optimale.</p></div></p><p><div class="checkpoint">Ionic - Étape 7 - Point de contrôle <div class="checkpoint-default"><p>Fournir un moyen pour vos utilisateurs de se déconnecter de votre application. Vérifiez que vous redirigez vers Auth0, puis vers l’adresse spécifiée dans le paramètre <code>returnTo</code>. Vérifiez que vous n’êtes plus connecté à votre application.</p></div>

  <div class="checkpoint-success"></div>

  <div class="checkpoint-failure"><p>Nous vous prions de nous excuser pour tout inconvénient causé. Voici quelques éléments à vérifier :</p><ul><li><p>vérifiez que l’URL que vous avez fournie dans le paramètre <code>returnTo</code> est enregistrée comme URL de rappel autorisée dans votre Tableau de bord Auth0</p></li></ul><p></p></div>

  </div></p><p></p>

## Afficher le profil utilisateur {{{ data-action="code" data-code="UserProfile.vue" }}}


<p>La trousse SDK Vue Auth0 récupère le <a href="https://auth0.com/docs/users/concepts/overview-user-profile" target="_blank" >profil utilisateur</a> associé aux utilisateurs connectés dans n’importe quel composant dont vous avez besoin, comme leur nom ou leur image de profil, pour personnaliser l’interface utilisateur. Les informations de profil sont accessibles à partir de la propriété <code>user</code> exposée par la fonction composable <code>useAuth0()</code>.</p><p>L’initialisation de la trousse SDK est asynchrone, et vous devez protéger le profil utilisateur en activant les propriétés <code>isLoading</code> et <code>user</code>. Une fois que <code>isLoading</code> est <code>false</code> et que <code>user</code> a une valeur, le profil utilisateur peut être utilisé.</p><p><div class="checkpoint">Ionic - Étape 8 - Point de contrôle <div class="checkpoint-default"><p>Assurez-vous que vos utilisateurs ont un moyen de consulter leurs informations de profil dans l’application et vérifiez que vous êtes en mesure de récupérer et d’afficher les informations de votre profil à l’écran une fois que vous vous êtes connecté.</p></div>

  <div class="checkpoint-success"></div>

  <div class="checkpoint-failure"></div>

  </div></p>
