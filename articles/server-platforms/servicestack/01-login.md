---
title: Login
default: true
description: This tutorial demonstrates how to use the Auth0 ServiceStack SDK to add authentication and authorization to your web app
budicon: 448
---

<%= include('../../_includes/_package', {
  org: 'auth0-samples',
  repo: 'auth0-servicestack-samples',
  path: '00-Starter-Seed',
  requirements: [
    'Microsoft Visual Studio 2015',
    '.NET Framework 4.5.2'
  ]
}) %>

At the end of this tutorial, you will have a working website that calls a ServiceStack API with authenticated users.

## Before Starting

We assume you are familiar with [ServiceStack](http://www.servicestack.net/)

## Create a Simple MVC4 Website and Install ServiceStack Through NuGet

For this example, we will use the standard template that ships with Visual Studio. Select __"FILE -> New project -> ASP.NET Web Application -> MVC"__ .

Once the default template unfolds, use NuGet to install the **ServiceStack.Host.Mvc** nuget, running the command:

${snippet(meta.snippets.dependencies)}

![](/media/articles/server-platforms/servicestack/install-servicestack-nuget.png)

Add the following line to your `App_Start/Route_Config.cs` file to the beginning of the `RegisterRoutes` function (this is required for ServiceStack):

```
routes.IgnoreRoute("api/{*pathInfo}");
```

Change `HomeController` to return the `default.htm` page. Under the __Controllers__ folder add:

```cs
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return Redirect("default.htm");
    }
}
```

## Install Auth0 OAuthProvider

We provide a [Nuget package](http://nuget.org/packages/Auth0-ServiceStack-OAuthProvider/) to simplify integration of Auth0 with ServiceStack based applications.

Run this command on the __Package Manager Console__:

  Install-Package Auth0-ServiceStack-OAuthProvider

This command will add two classes to your project under the __App_Start__ folder: `Auth0Provider` and `Auth0UserSession`.

`Auth0Provider` extends ServiceStack's `OAuthProvider` and handles the authentication transaction for you.

## Enable Authentication and Plugin Auth0's Provider

Open the `AppHost.cs` file (also under the __App_Start__ folder) generated by the ServiceStack NuGet. Uncomment the following call under the `Configure` method:

```
ConfigureAuth(container);
```

And then uncomment (if it is commented out) and edit the `ConfigureAuth` method to look like this:

${snippet(meta.snippets.setup)}

> In this sample we are not interested in user registration. So we are leaving that section out.

## Configuring Callback URLs

<div class="setup-callback">
<p>After authenticating the user on Auth0, we will do a POST to a URL on your website. For security purposes, you have to register this URL on the <a href="${manage_url}/#/applications/${account.clientId}/settings">Client Settings</a> section on Auth0 Admin app (make sure to change the port).</p>

<pre><code>http://localhost:PORT/api/auth/auth0/</pre></code>
</div>

## Enter Configuration Settings

Open your `web.config` file and change the three Auth0's parameters under `<appSettings>`:

```
<add key="oauth.auth0.AppId" value="${account.clientId}" />
<add key="oauth.auth0.AppSecret" value="${account.clientSecret}" />
<add key="oauth.auth0.OAuthServerUrl" value="https://${account.namespace}" />
```

## Add Backend Code to Test the App

Open the `WebServiceExamples.cs` file.

### 6.1. Add the `Authenticate` Attribute to the `Hello` DTO:

```cs
[Authenticate]
public class Hello
{
  public string Name { get; set; }
}
```

### 6.2. Add an `IAuthSession` Property to the `HelloResponse` DTO:

```cs
public class HelloResponse
{
  public IAuthSession UserInfo { get; set; }
  public string Result { get; set; }
  public ResponseStatus ResponseStatus { get; set; } //Where Exceptions get auto-serialized
}
```

### 6.3. Modify the `HelloService` to Return the Current User's `UserInfo` Object

```cs
public class HelloService : Service
{
  public object Any(Hello request)
  {
    IAuthSession session = this.GetSession();
    var sb = new StringBuilder();
    sb.AppendLine("Id: " + session.Id);
    sb.AppendLine("DisplayName: " + session.DisplayName);

    return new HelloResponse { Result = "Hello, " + request.Name, UserInfo = session };
  }
}
```
> Notice we are not doing anything useful with these properties. You can place a breakpoint here and explore the session object.

## Triggering Login Manually or Integrating Lock

<%= include('../../_includes/_lock-sdk') %>

## Add UI Code to Login and Invoke the `HelloService`

Open `default.htm` and add the following statement in the `jQuery.ready` body:

```js
// get user info from hello endpoint
$.getJSON('/api/hello', function (data) {
    $('#userInfo').text(JSON.stringify(data.userInfo, 1, 2));
});
```

Add a section to display the `UserInfo`:

```html
<div>User Info:
     <pre><code id="userInfo">Not logged in</code></pre>
</div>
```

## Run the app

After successful authentication, the `UserProfile` will be displayed on the page.
