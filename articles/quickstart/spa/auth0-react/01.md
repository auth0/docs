---
title: Login
description: This tutorial demonstrates how to add user login to a React application using Auth0.
budicon: 448
topics:
  - quickstarts
  - spa
  - react
  - login
github:
  path: 01-Login
contentType: tutorial
useCase: quickstart
---

<!-- markdownlint-disable MD002 MD034 MD041 -->

This guide demonstrates how to use the Auth0 React SDK with any new or existing React application.

## Prerequisites

- If you don't have an Auth0 account already, <a href="https://auth0.com/signup" data-amp-replace="CLIENT_ID" data-amp-addparams="anonId=CLIENT_ID(cid-scope-cookie-fallback-name)">sign up for a free Auth0 account</a>, and [create a tenant](https://auth0.com/docs/getting-started/create-tenant).

- [Register your React application](https://auth0.com/docs/dashboard/guides/applications/register-app-spa) as a single-page application with Auth0.

## Install the SDK

Run the following command within your project directory to install the Auth0 React SDK:

```bash
npm install @auth0/auth0-react
```

> You may use `yarn` instead.

You can use the Auth0 React SDK to add authentication to your React app quickly, gain access to user profile information, and securely call APIs.

## Configure the SDK

Under the hood, the Auth0 React SDK uses [React Context](https://reactjs.org/docs/context.html) to manage the authentication state of your users and to expose helpful utility methods. One way to integrate Auth0 with your React app is to wrap your root component with an `Auth0Provider` that you can import from the SDK.

```javascript
import React from 'react';
import ReactDOM from 'react-dom';
import App from './App';

import {Auth0Provider} from "@auth0/auth0-react";

ReactDOM.render(
  <Auth0Provider 
    domain="${account.namespace}"
    client_id="${account.clientId}"
    redirect_uri={window.location.origin}
  >
    <App />
  </Auth0Provider>,
  document.getElementById("root")
);
```

The `Auth0Provider` component takes three props:
 
- `domain` and `client_id`: The values of these properties correspond to the "Domain" and "Client ID" values present under the "Settings" of the single-page application that you registered with Auth0.

- `redirect_uri`: The URL to where you'd like to redirect your users after they authenticate with Auth0. 

Once configured, `Auth0Provider` will store the authentication state of your users, the state of the Auth0 Client (is Auth0 ready to use?), and provide you with helper methods to log in and log out your users. You can access the content of the `Auth0Provider` with `useAuth0()`, which is a custom [React Hook](https://reactjs.org/docs/hooks-reference.html) exposed by the SDK.

## Add Login and Logout Buttons to Your App

The Auth0 React SDK makes it easy to create functionality to log in or log out your users from your React application, such as a button or link. After you have configured the `Auth0Provider`, you can use the `useAuth0()` custom React Hook within any component where you need this functionality by using the following boolean flags and methods it exposes:

- `isAuthenticated`: Returns `true` if the Auth0 authentication server has authenticated the user.

- `isLoading`: Returns `false` when the SDK has created an Auth0 Client and has determined the user's authentication status.

- `login()`: Takes your users to the [Auth0 Universal Login](https://auth0.com/docs/universal-login) page and back to your application once they log in.

- `logout()`: Logs out the user from your application.

```javascript
import React from "react";
import "./App.css";
import { useAuth0 } from "@auth0/auth0-react";

function App() {
  const { isAuthenticated, isLoading, login, logout } = useAuth0();

  return (
    <div className="App">
      {isLoading ? (
        <h2>Loading...</h2>
      ) : (
        <>
          {isAuthenticated ? (
            <button onClick={() => logout()}>Log Out</button>
          ) : (
            <button onClick={() => login()}>Log In</button>
          )}
        </>
      )}
    </div>
  );
}

export default App;
```

The `App` component above displays a `Loading...` message while the SDK completes its initialization process: creating an Auth0 Client and determining the user's authentication status. Once the initialization is complete, the component renders a "Log In" button if Auth0 has not authenticated the user yet; otherwise, it renders a "Log Out" button.

> By default, Auth0 offers you developer keys to test logging in with a [social identity provider](https://auth0.com/docs/connections/identity-providers-social), such as Google. These developer keys have some limitations that may cause your app to behave differently. For more details on this and on how to fix it, read on ["Test Social Connections with Auth0 Developer Keys"](https://auth0.com/docs/connections/social/devkeys#limitations-of-developer-keys).

## Read the User Profile

Once you have users stored in your Auth0 user database, the Auth0 React SDK helps you retrieve the profile information associated with logged-in users quickly in whatever component you need it, such as their name or profile picture to personalize a page. The profile information is available through the `user` object exposed by the `useAuth0()` custom React Hook.

Take for example this `Profile` component:

```javascript
import React from "react";
import { useAuth0 } from "@auth0/auth0-react";

const Profile = () => {
  const { user } = useAuth0();

  return (
    <div>
      <img src={user.picture} alt={user.name} />
      <h2>{user.name}</h2>
      <p>{user.email}</p>
    </div>
  );
};

export default Profile;
```

The `user` property from `useAuth()` contains sensitive information and artifacts related to the user's identity. As such, you can prevent leaking sensitive information to the public by checking if your app has initialized the SDK correctly and if Auth0 has authenticated the user before you render any component that consumes the `user` property. An alternative to doing manual checks within a component is to prevent the whole component from rendering using routing.

## Protecting a Route

Your React application may implement navigation using a router. However, some routes may render public resources, while others may render private ones. In such a case, you can create an authentication route guard to render any component that defines a private resource conditionally. If Auth0 has authenticated the user, the guard renders the component; otherwise, the guard redirects the user to the [Auth0 Universal Login Page](https://auth0.com/docs/universal-login) to either log in or sign up.

⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️

**TODO: Final URL for additional routing examples.**
 
⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️

> React has no opinion on routing. This example assumes you are using [`react-router-dom`](https://github.com/ReactTraining/react-router#readme) &mdash; [access more examples for Gatsby and Next.js.](https://github.com/auth0-samples/auth0-react-sdk-sample)

The default behavior is to redirect your users to the value of the `redirect_uri` prop of `Auth0Provider` after they log in or sign up using Auth0. However, you may want to redirect users directly to the private route they were trying to access. You can define such behavior using the `onRedirectCallback` prop of `Auth0Provider`.

With React Router, your goal is to use the `history` object within the `onRedirectCallback` method to navigate to that private route programmatically. React Router exposes the `useHistory()` custom React Hook to make it easy to access the `history` object in any component that is a descendant of the `BrowserRouter` component.

As such, you can create an `Auth0ProviderWithHistory` function component that renders `Auth0Provider`. This wrapper component then calls `useHistory()` within its body to make the `history` object available within the scope of `Auth0Provider` and its  `onRedirectCallback` event handler.

**Root component:**

```javascript
ReactDOM.render(
  <BrowserRouter>
    <Auth0ProviderWithHistory>
      <App />
    </Auth0ProviderWithHistory>
  </BrowserRouter>,
  document.getElementById("root")
);
```

**`Auth0ProviderWithHistory` component:**

```javascript
const Auth0ProviderWithHistory = ({ children }) => {
  const history = useHistory();

  const onRedirectCallback = (appState) => {
    history.push(appState?.returnTo || window.location.pathname);
  };

  return (
    <Auth0Provider
      domain="${account.namespace}"
      client_id="${account.clientId}"
      redirect_uri={window.location.origin}
      onRedirectCallback={onRedirectCallback}
    >
      {children}
    </Auth0Provider>
  );
};
```

The implementation of the authentication route guard may look like this `PrivateRoute` component:

```javascript
import { withLoginRequired } from "@auth0/auth0-react";

const PrivateRoute = ({ component, ...args }) => (
  <Route component={withLoginRequired(component)} {...args} />
);
```

You can use the `PrivateRoute` component in the same way that you use the `Route` component from React Router:

```javascript
function App() {
  const { isLoading } = useAuth0();

  return (
    <div className="App">
      {isLoading ? (
        <h2>Loading...</h2>
      ) : (
        <>
          <NavBar />
          <Switch>
            <Route path="/" exact component={Home} />
            <PrivateRoute path="/profile" component={Profile} />
          </Switch>
        </>
      )}
    </div>
  );
}
```

⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️

**TODO: Final URL to sample.**
 
⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️ ⚠️

Take a look at this sample that puts this technique together while also implementing a navigation bar: "Using React Router with the Auth0 React SDK" [sample required]

## Call an API

Your React application may need to access protected data from an API that you are also [securing with Auth0](https://auth0.com/docs/microsites/protect-api/protect-api). For that use case, you'll need to retrieve an access token in the format of a [JSON Web Token (JWT)](https://jwt.io/) to authorize any calls you make to that secured API. 

For the Auth0 React SDK to configure the access token correctly, you need to pass an `audience` property to the `Auth0Provider` as follows:

```javascript
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";

import { Auth0Provider } from "@auth0/auth0-react";

ReactDOM.render(
  <Auth0Provider
    domain="${account.namespace}"
    client_id="${account.clientId}"
    audience="${apiIdentifier}"
    redirect_uri={window.location.origin}
  >
    <App />
  </Auth0Provider>,
  document.getElementById("root")
);
```

The set up is similar to the one discussed in the "Configure the SDK" section: you wrap your root component with `Auth0Provider` and use the "Settings" values of the single-page application you've registered with Auth0 to populate the values of `domain` and `client_id`. 

However, this time you also pass it an `audience` prop to allow the API to validate the access token properly. When you [set up an API](https://auth0.com/docs/getting-started/set-up-api) with Auth0, you define its audience value, which you can find as the "Identifier" value under the API "Settings."

Once you configure `Auth0Provider`, you can easily get the access token using the `getToken()` method from the `useAuth0()` custom React Hook wherever you need it. Take this `Account` component as an example:

```javascript
import React, { useEffect, useState } from "react";
import { useAuth0 } from "@auth0/auth0-react";

const Account = () => {
  const { getToken } = useAuth0();
  const [data, setData] = useState(null);

  useEffect(() => {
    (async () => {
      const token = await getToken();

      const response = await fetch("http://localhost:7000/protected-hello", {
        headers: {
          Authorization: `Bearer <%= "${token}" %>`,
        },
      });
      const json = await response.json();

      setData(json);
    })();
  }, [getToken]);

  return (
    <div>{data ? <span>{data.message}</span> : <span>Loading...</span>}</div>
  );
};

export default Account;
```

`getToken()` returns a Promise that resolves to the access token, which is `token` in the example above. You can then include that token in the authorization header of any API call that you make. The API will take care of validating the access token and processing the request.
